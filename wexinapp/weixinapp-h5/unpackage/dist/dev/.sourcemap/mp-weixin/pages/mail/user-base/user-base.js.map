{"version":3,"sources":["uni-app:///main.js","webpack:///E:/program/uni-app/weixinapp-h5/pages/mail/user-base/user-base.vue?97cd","webpack:///E:/program/uni-app/weixinapp-h5/pages/mail/user-base/user-base.vue?07e4","webpack:///E:/program/uni-app/weixinapp-h5/pages/mail/user-base/user-base.vue?6a50","webpack:///E:/program/uni-app/weixinapp-h5/pages/mail/user-base/user-base.vue?21bd","uni-app:///pages/mail/user-base/user-base.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,4G,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,iBAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AAC8K;AAC9K,gBAAgB,kLAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA6pB,CAAgB,4oBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuFjrB;AACA,mG;;AAEA;AACA,yBADA;AAEA;AACA,0BADA;AAEA,0BAFA;AAGA,4BAHA;AAIA,8BAJA;AAKA,kCALA;AAMA,wBANA,EAFA;;AAUA,MAVA,kBAUA;AACA;AACA;AACA,aADA,EADA;;;AAKA,GAhBA;AAiBA,QAjBA,kBAiBA,CAjBA,EAiBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAHA;AAIA,GA3BA;AA4BA,QA5BA,oBA4BA;AACA;AACA;AACA,GA/BA;AAgCA,eAhCA,2BAgCA;AACA;AACA,GAlCA;AAmCA;AACA,aADA,uBACA;AACA;AACA,iCADA;AAEA,sCAFA;AAGA,+EAHA;AAIA,kFAJA;;AAMA;AACA,KATA;AAUA,WAVA,qBAUA;AACA;AACA,+BADA;AAEA,sCAFA;AAGA,gEAHA;;AAKA,KAhBA;AAiBA,WAjBA,qBAiBA;AACA;AACA;AACA,sBADA;AAEA,wBAFA;AAGA,wBAHA;AAIA,0BAJA,EADA;;AAOA;AACA,sBADA;AAEA,wBAFA;AAGA,wBAHA;AAIA,wCAJA,EAPA;;AAaA;AACA,sBADA;AAEA,qDAFA;AAGA,qBAHA;AAIA,wBAJA,EAbA;;AAmBA;AACA,sBADA;AAEA,2BAFA;AAGA,wBAHA;AAIA;AACA,oCADA;AAEA,sCAFA,GAJA,EAnBA;;;AA4BA;AACA,sBADA;AAEA,sDAFA;AAGA,qBAHA;AAIA,yBAJA,EA5BA;;AAkCA;AACA,sBADA;AAEA,mBAFA;AAGA,wBAHA;AAIA;AACA,iCADA;AAEA,sBAFA,GAJA,EAlCA;;;;AA4CA,KA9DA,EAnCA;;AAmGA;AACA,WADA,qBACA;AACA;AACA,UADA,CACA;AACA;AACA;AACA;AACA;AACA,OANA;AAOA,KATA;AAUA;AACA,WAXA,mBAWA,CAXA,EAWA;AACA;AACA;AACA,kBADA;AAEA,UAFA,CAEA;AACA;AACA;AACA,OALA;AAMA,KAnBA;AAoBA;AACA,YArBA,oBAqBA,CArBA,EAqBA;AACA;AACA;AACA,kCADA;AAEA;AACA;AACA;AACA;AACA,8BADA;AAEA,gBAFA,CAEA;AACA;AACA,aAJA;AAKA;AACA,+BADA;AAEA,0BAFA;;AAIA;AACA,SAfA;;AAiBA,KAxCA;AAyCA,WAzCA,qBAyCA;AACA;AACA;AACA;AACA;AACA;AACA,4BADA;AAEA,4DAFA;AAGA,oCAHA;AAIA,2BAJA,IADA;;;AAQA,KArDA;AAsDA,cAtDA,wBAsDA;AACA;AACA,KAxDA;AAyDA;AACA,cA1DA,sBA0DA,CA1DA,EA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCADA;;AAGA;AACA;AACA;AACA,gBARA;;AAUA;AACA;AACA;AACA,OAHA,EAGA,EAHA;AAIA,KA5EA,EAnGA,E","file":"pages/mail/user-base/user-base.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/mail/user-base/user-base.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user-base.vue?vue&type=template&id=df6b3890&\"\nvar renderjs\nimport script from \"./user-base.vue?vue&type=script&lang=js&\"\nexport * from \"./user-base.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/mail/user-base/user-base.vue\"\nexport default component.exports","export * from \"-!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-base.vue?vue&type=template&id=df6b3890&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-base.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-base.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"page\">\n\t\t<freeNavBar showBack :showRight=\"detail.friend\" bgColor='bg-white'>\r\n\t\t\t<freeIconButton v-if=\"detail.friend\" slot='right' :icon=\"'\\ue6fd'\" @click=\"openAction\">\r\n\t\t\t</freeIconButton>\r\n\t\t</freeNavBar>\r\n\t\t\r\n\t\t<view class=\"py-4 px-3 flex align-center bg-white border-bottom\">\r\n\t\t\t<free-avatar :src=\"detail.avatar\" size=\"120\"></free-avatar>\r\n\t\t\t<view class=\"flex flex-column ml-3 flex-1\">\r\n\t\t\t\t<view class=\"flex align-center justify-between\">\r\n\t\t\t\t\t<text class=\"font-lg font-weight-bold mb-1\">{{detail.nickname}}</text>\r\n\t\t\t\t\t<image v-if=\"detail.star\" src=\"../../../static/images/star.png\" style=\"width: 40rpx;height: 40rpx;\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<text class=\"font-md text-light-muted\">账号：{{detail.username}}</text>\r\n\t\t\t\t<!-- <text class=\"font-md text-light-muted\">地区：广东广州</text> -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<freeListItem\r\n\t\t\tv-if=\"detail.friend\"\r\n\t\t\tshowRight\r\n\t\t\t:showLeftIcon='false'\r\n\t\t\t@click=\"navigate(tagPath)\"\r\n\t\t>\r\n\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t<text class=\"font-md text-dark mr-3\">标签</text>\r\n\t\t\t\t<text v-for=\"(item,index) in detail.tags\" :key=\"index\"  class=\"font-md text-light-muted mr-2\">{{item}}</text>\r\n\t\t\t\t<text v-if=\"detail.tags.length < 1\" class=\"font-md text-light-muted\">未设置</text>\r\n\t\t\t</view>\r\n\t\t</freeListItem>\r\n\t\t\r\n\t\t<freeDivider></freeDivider>\r\n\t\t\r\n\t\t<freeListItem\r\n\t\t\tv-if=\"detail.friend\"\r\n\t\t\tshowRight\r\n\t\t\t:showLeftIcon='false'\r\n\t\t>\r\n\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t<text class=\"font-md text-dark mr-3\">朋友圈</text>\r\n\t\t\t\t<image src='../../../static/video/demo.jpg' style=\"width: 90rpx; height: 90rpx;\" class=\"mr-2\"></image>\r\n\t\t\t</view>\r\n\t\t</freeListItem>\r\n\t\t<freeListItem\r\n\t\t\ttitle=\"更多信息\" \r\n\t\t\tshowRight\r\n\t\t\t:showLeftIcon='false'\r\n\t\t>\r\n\t\t</freeListItem>\r\n\t\t\r\n\t\t<freeDivider></freeDivider>\r\n\t\t\r\n\t\t<view v-if=\"detail.friend\" @click=\"doEvent\" class=\"py-3 flex align-center justify-center bg-white\" hover-class=\"bg-light\">\r\n\t\t\t<text class=\"iconfont text-primary mr-1\" v-if=\"!detail.isblack\">&#xe64e;</text>\r\n\t\t\t<text class=\"font-md text-primary\">{{detail.isblack ? '移除黑名单' : '发信息'}}</text>\r\n\t\t</view>\r\n\t\t<view v-else @click=\"navigate(addFriend)\" class=\"py-3 flex align-center justify-center bg-white\" hover-class=\"bg-light\">\r\n\t\t\t<text class=\"font-md text-primary\">添加好友</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 操作菜单 -->\r\n\t\t<freePopup maskColor bottom ref=\"action\" transformOrigin=\"center bottom\">\r\n\t\t\t<scroll-view scroll-y=\"true\" style=\"height: 580rpx;\" class=\"bg-white\" :show-scrollbar=\"false\">\r\n\t\t\t\t<freeListItem\r\n\t\t\t\t\tv-for=\"(item,index) in actions\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t:title=\"item.title\" \r\n\t\t\t\t\t:showRight='false'\r\n\t\t\t\t\t:border=\"false\"\r\n\t\t\t\t\t@click=\"popupEvent(item)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<text class=\"iconfont font-lg py-1\" slot='icon'>{{item.icon}}</text>\r\n\t\t\t\t</freeListItem>\r\n\t\t\t</scroll-view>\r\n\t\t</freePopup>\n\t</view>\n</template>\n\n<script>\r\n\timport freeNavBar from '@/components/free-ui/free-nav-bar.vue'\r\n\timport freeAvatar from '@/components/free-ui/free-avatar.vue'\r\n\timport freeDivider from '@/components/free-ui/free-divider.vue'\r\n\timport freeListItem from '@/components/free-ui/free-list-item.vue'\r\n\timport freeIconButton from '@/components/free-ui/free-icon-button.vue'\r\n\timport freePopup from '@/components/free-ui/free-popup.vue'\r\n\timport auth from '@/common/mixin/auth.js'\r\n\timport $H from '@/common/free-lib/request.js';\r\n\t\n\texport default {\r\n\t\tmixins: [auth],\r\n\t\tcomponents:{\r\n\t\t\tfreeNavBar,\r\n\t\t\tfreeAvatar,\r\n\t\t\tfreeDivider,\r\n\t\t\tfreeListItem,\r\n\t\t\tfreeIconButton,\r\n\t\t\tfreePopup\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tdetail: {\r\n\t\t\t\t\tid:0\r\n\t\t\t\t}\n\t\t\t}\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tif(!e.user_id){\r\n\t\t\t\treturn this.backToast()\r\n\t\t\t}\r\n\t\t\tthis.detail.id = e.user_id\r\n\t\t\t\r\n\t\t\tuni.$on('saveRemarkTag', e => {\r\n\t\t\t\tthis.nickname = e.nickname\r\n\t\t\t\tthis.tagList = e.tagList\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// 获取当前用户资料\r\n\t\t\tthis.getData()\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\tuni.$off('saveRemarkTag')\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\taddFriend() {\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tfriend_id:this.detail.id,\r\n\t\t\t\t\tnickname:this.detail.nickname,\r\n\t\t\t\t\tlookme:typeof this.detail.lookme === 'number' ? this.detail.lookme : 1,\r\n\t\t\t\t\tlookhim:typeof this.detail.lookhim === 'number' ? this.detail.lookhim : 1\r\n\t\t\t\t}\r\n\t\t\t\treturn 'mail/add-friend/add-friend?params='+JSON.stringify(obj)\r\n\t\t\t},\r\n\t\t\ttagPath(){\r\n\t\t\t\treturn \"mail/user-remark-tag/user-remark-tag?params=\"+JSON.stringify({\r\n\t\t\t\t\t\tuser_id:this.detail.id,\r\n\t\t\t\t\t\tnickname:this.detail.nickname,\r\n\t\t\t\t\t\ttags:this.detail.tags ? this.detail.tags.join(',') : ''\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tactions(){\r\n\t\t\t\treturn [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon: '\\ue6b3',\r\n\t\t\t\t\t\ttitle: '设置备注和标签',\r\n\t\t\t\t\t\ttype: 'navigate',\r\n\t\t\t\t\t\tpath: this.tagPath\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon: '\\ue613',\r\n\t\t\t\t\t\ttitle: '把他推荐给朋友',\r\n\t\t\t\t\t\ttype: 'navigate',\r\n\t\t\t\t\t\tpath: 'mail/send-card/send-card'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon: '\\ue6b0',\r\n\t\t\t\t\t\ttitle: this.detail.star ? '取消星标朋友' : '设置星标朋友',\r\n\t\t\t\t\t\ttype: 'event',\r\n\t\t\t\t\t\tevent: 'setStar'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon: '\\ue667',\r\n\t\t\t\t\t\ttitle: '设置朋友圈和动态权限',\r\n\t\t\t\t\t\ttype: 'navigate',\r\n\t\t\t\t\t\tpath:\"mail/user-moments-auth/user-moments-auth?user_id=\"+this.detail.id +\"&params=\"+JSON.stringify({\r\n\t\t\t\t\t\t\tlookme:this.detail.lookme,\r\n\t\t\t\t\t\t\tlookhim:this.detail.lookhim,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon: '\\ue638',\r\n\t\t\t\t\t\ttitle: this.detail.isblack ? '移除黑名单' : '加入黑名单',\r\n\t\t\t\t\t\ttype: 'event',\r\n\t\t\t\t\t\tevent: 'setBlack'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon: '\\ue61c',\r\n\t\t\t\t\t\ttitle: '投诉',\r\n\t\t\t\t\t\ttype: 'navigate',\r\n\t\t\t\t\t\tpath:\"mail/user-report/user-report?params=\"+JSON.stringify({\r\n\t\t\t\t\t\t\tuser_id:this.detail.id,\r\n\t\t\t\t\t\t\ttype:\"user\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\n\t\tmethods: {\r\n\t\t\tgetData(){\r\n\t\t\t\t$H.get('/friend/read/'+this.detail.id)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif(!res){\r\n\t\t\t\t\t\t\treturn this.backToast('该用户不存在')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.detail = res\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 设为星标\r\n\t\t\tsetStar(e){\r\n\t\t\t\tlet star = this.detail.star == 0 ? 1 : 0\r\n\t\t\t\t$H.post('/friend/setstar/'+this.detail.id,{\r\n\t\t\t\t\tstar\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.detail.star = star\r\n\t\t\t\t\te.title = this.detail.star ? '取消星标好友' : \"设为星标朋友\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 加入黑名单\r\n\t\t\tsetBlack(e){\r\n\t\t\t\tlet msg = this.detail.isblack ? '移出黑名单' : '加入黑名单'\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: '是否要'+msg+'？',\r\n\t\t\t\t\tsuccess: (res)=> {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tlet isblack = this.detail.isblack == 0 ? 1 : 0\r\n\t\t\t\t\t\t\t$H.post('/friend/setblack/'+this.detail.id,{\r\n\t\t\t\t\t\t\t\tisblack\r\n\t\t\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\t\t\tthis.detail.isblack = isblack\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: msg+'成功',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdoEvent(){\r\n\t\t\t\tif(this.detail.isblack){\r\n\t\t\t\t\treturn this.setBlack()\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/chat/chat/chat?params='+encodeURIComponent(JSON.stringify({\r\n\t\t\t\t\t\tid: this.detail.id,\r\n\t\t\t\t\t\tname: this.detail.nickname || this.detail.username,\r\n\t\t\t\t\t\tavatar: this.detail.avatar,\r\n\t\t\t\t\t\tchat_type: 'user'\r\n\t\t\t\t\t}))\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t\topenAction(){\r\n\t\t\t\tthis.$refs.action.show()\r\n\t\t\t},\r\n\t\t\t// 操作菜单\r\n\t\t\tpopupEvent(e){\r\n\t\t\t\tif(!e.type){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tswitch (e.type){\r\n\t\t\t\t\tcase 'navigate':\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/'+e.path\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'event':\r\n\t\t\t\t\tthis[e.event](e)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t// 关闭弹出层\r\n\t\t\t\t\tthis.$refs.action.hide()\r\n\t\t\t\t},20)\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}